<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Medieval Pixel Idle</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="stylesheet" href="style.css"/>
</head>
<body>

  <!-- AUTH SCREEN -->
  <div id="auth-screen" class="screen">
    <div class="auth-card">
      <h1>Medieval Pixel Idle</h1>
      <p class="subtitle">Welcome traveler. Log in or register to begin.</p>

      <div class="auth-tabs">
        <button class="tab-btn active" data-tab="login">Login</button>
        <button class="tab-btn" data-tab="register">Register</button>
      </div>

      <div class="auth-panels">
        <div class="auth-panel" id="login-panel">
          <label class="label">
            <span>Username</span>
            <input id="login-username" type="text" maxlength="24" autocomplete="username" />
          </label>
          <label class="label">
            <span>Password</span>
            <input id="login-password" type="password" maxlength="64" autocomplete="current-password"/>
          </label>
          <button id="login-btn" class="btn primary">Enter</button>
        </div>

        <div class="auth-panel hidden" id="register-panel">
          <label class="label">
            <span>Username</span>
            <input id="register-username" type="text" maxlength="24" autocomplete="username" />
          </label>
          <label class="label">
            <span>Password</span>
            <input id="register-password" type="password" maxlength="64" autocomplete="new-password"/>
          </label>
          <button id="register-btn" class="btn primary">Create account</button>
        </div>
      </div>

      <div class="auth-footer">
        <small>Your progress is autosaved every second.</small>
      </div>
    </div>
  </div>

  <!-- DEBUG -->
  <div id="debug-modal" class="modal hidden">
    <div class="modal-card">
      <h2>Debug Panel</h2>

      <div id="debug-lock">
        <p>Enter password:</p>
        <input id="debug-pass" type="password" placeholder="Password"/>
        <button id="debug-unlock-btn" class="btn primary">Unlock</button>
      </div>

      <div id="debug-tools" class="hidden">
        <div class="debug-actions">
          <button class="btn secondary" data-debug="addPoints">Add 10000 points</button>
          <button class="btn secondary" data-debug="addAllBuildingLevels">Add 100 levels to all buildings</button>
          <button class="btn secondary" data-debug="addClickLevels">Add 100 levels to Click</button>
          <button class="btn secondary" data-debug="clickIncomeBoost">Click income x1000</button>
          <button class="btn secondary" data-debug="spawnSpider">Spawn spider</button>
          <button class="btn secondary" data-debug="breakClick">Break click button</button>
          <button class="btn secondary" data-debug="goldenClick">Make click button golden</button>
          <button class="btn danger" data-debug="resetAll">Reset all levels and points</button>
        </div>
      </div>

      <button id="debug-close" class="btn tiny">Close</button>
    </div>
  </div>

  <!-- GAME SCREEN -->
  <div id="game-screen" class="screen hidden game-layout">

    <!-- TITLE -->
    <div class="game-title">Medieval Pixel Idle</div>

    <!-- STATS -->
    <div class="stats-bar">
      <div class="stat">
        <span class="stat-label">Points</span>
        <span id="points" class="stat-value">0.0000</span>
      </div>
      <div class="stat">
        <span class="stat-label">Points/sec</span>
        <span id="pps" class="stat-value">0.0000</span>
      </div>
      <div class="stat">
        <span class="stat-label">Points/click</span>
        <span id="ppc" class="stat-value">0.1111</span>
      </div>

      <div class="userbox">
        <span id="username-display"></span>
        <button id="logout-btn" class="btn tiny">Logout</button>
        <button id="debug-open" class="btn tiny secondary">debug</button>
      </div>
    </div>

    <!-- MAIN CONTENT -->
    <main class="game-columns">

      <!-- LEFT PANEL – CLICK -->
      <section class="left">
        <div class="click-area">
          <div class="click-row">
            <button id="click-btn" class="btn click-btn">Click</button>

            <!-- middle column: status -->
            <div class="click-middle">
              <div id="click-status" class="status-badge">Ready</div>
            </div>

            <!-- right column: Buy and Upgrade (Buy to the right of Click, Upgrade under Buy) -->
            <div class="quick-actions">
              <button id="click-buy" class="btn primary">Buy "Click" level</button>
              <button id="click-seg-upgrade" class="btn small mt-6 hidden">Upgrade</button>
            </div>
          </div>

          <div class="click-info">
            <div class="info-item">
              <div class="info-left"><strong>Level:</strong></div>
              <div class="info-right"><span id="click-level">0</span> / <span id="click-max">1000</span></div>
            </div>

            <div class="info-item">
              <div class="info-left"><strong>Current Income / click:</strong></div>
              <div class="info-right"><span id="click-income">0.1111</span></div>
            </div>

            <div class="info-item">
              <div class="info-left"><strong>Next Upgrade Cost:</strong></div>
              <div class="info-right"><span id="click-cost">7.7720</span></div>
            </div>

            <div class="info-item">
              <div class="info-left"><strong>Segment Upgrade:</strong></div>
              <div class="info-right"><span id="click-seg-info">Buy 10 levels to unlock</span></div>
            </div>
          </div>

          <div class="bulk-row">
            <span class="bulk-label">Bulk level:</span>
            <div class="bulk-buttons" id="bulk-buttons">
              <button class="btn tiny bulk active" data-bulk="1">x1</button>
              <button class="btn tiny bulk" data-bulk="10">x10</button>
            </div>
            <!-- kept for compatibility; primary buy moved to quick-actions -->
            <button id="click-buy-duplicate" class="btn primary hidden">Buy "Click" level</button>
          </div>
        </div>

      <!-- // <div class="effects-board"> -->
       <!-- //  <h3>Active Effects</h3> -->
       <!--  // <div id="effects-list"></div> -->
      <!-- // </div> -->

        <div class="notice-board">
          <h3>Notifications</h3>
          <div id="toasts" class="toasts"></div>
        </div>

        <div class="endgame">
          <button id="endgame-btn" class="btn hidden">End game</button>
          <button id="continue-btn" class="btn hidden">Continue to extended caps</button>
        </div>
      </section>

      <!-- RIGHT PANEL – BUILDINGS -->
      <section class="right">
        <h2>Buildings</h2>
        <div id="buildings-list" class="buildings-list"></div>
      </section>

    </main>

    <!-- SPIDER -->
    <div id="spider" class="spider hidden" title="Catch the spider!"></div>

    <!-- UBER BUILDING FOOTER -->
    <footer class="uber-footer">
      <h3>Uber Turbo Building</h3>
      <div id="uber-card" class="uber-card locked">
        <div class="uber-pixel" id="uber-pixel"></div>
        <div class="uber-info">
          <div><strong>Name:</strong> <span>Citadel</span></div>
          <div><strong>Level:</strong> <span id="uber-level">0</span> / <span id="uber-max">10</span></div>
          <div><strong>Income/sec:</strong> <span id="uber-income">0.0000</span></div>
          <div><strong>Next Cost:</strong> <span id="uber-cost">0.0000</span></div>
          <div class="seg-upgrade">
            <strong>Segment Upgrade:</strong>
            <span id="uber-seg-info">Buy 10 levels to unlock</span>
            <button id="uber-seg-upgrade" class="btn small hidden">Upgrade</button>
          </div>
        </div>
        <div class="uber-actions">
          <button id="uber-buy" class="btn primary" disabled>Buy levels</button>
        </div>
        <div class="uber-lock">Locked: reach level ≥ 800 on all buildings and the Click.</div>
      </div>
    </footer>

  </div>

  <canvas id="sprite-canvas" class="hidden"></canvas>
  <script src="script.js"></script>
</body>
</html>
