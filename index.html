<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Medieval Pixel Idle</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="stylesheet" href="style.css"/>
  
  <!-- Firebase SDK -->
  <script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
    import { getAuth } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-auth.js";
    import { getFirestore } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-firestore.js";

    // Your web app's Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyBbfHWMLUlfon2abluwURHHUUZOjiX_MNM",
      authDomain: "ckickker.firebaseapp.com",
      projectId: "ckickker",
      storageBucket: "ckickker.firebasestorage.app",
      messagingSenderId: "437726733760",
      appId: "1:437726733760:web:d9a118b3d94d9523c4d425"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    window.firebaseAuth = getAuth(app);
    window.firebaseDb = getFirestore(app);
  </script>
  <style>
  /* Global reset to ensure full-bleed layout */
  html, body {
    width: 100%;
    height: 100%;
  }
  body {
    margin: 0; /* —É–±–∏—Ä–∞–µ–º –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π –æ—Ç—Å—Ç—É–ø –¥–æ–∫—É–º–µ–Ω—Ç–∞ */
  }

 /* –†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏–≥—Ä—ã */
.game-layout {
  width: 100%;       /* –≤–æ –≤—Å—é —à–∏—Ä–∏–Ω—É –æ–∫–Ω–∞ */
  max-width: none;    /* —É–±–∏—Ä–∞–µ–º –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ */
  margin: 0;          /* —É–±–∏—Ä–∞–µ–º –∞–≤—Ç–æ—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ */
  box-sizing: border-box;
}

/* –°–µ—Ç–∫–∞ –∫–æ–ª–æ–Ω–æ–∫ */
.game-columns {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr)); /* —Ç—Ä–∏ —Ä–∞–≤–Ω—ã–µ —á–∞—Å—Ç–∏ */
  gap: 20px;
  width: 100%;        /* —à–∏—Ä–∏–Ω–∞ –Ω–∞—Å–ª–µ–¥—É–µ—Ç—Å—è –æ—Ç —Ä–æ–¥–∏—Ç–µ–ª—è */
  padding: 20px;
  align-items: start;
}


  /* Ensure left column content (cursor area + notifications) stacks vertically */
  .col-left {
    display: flex;
    flex-direction: column;
    gap: 16px;
    min-height: 60vh;
    width: 100%;
  }

  /* Center column: buildings list should be scrollable and centered */
  .col-center {
    display: flex;
    flex-direction: column;
    gap: 16px;
    min-height: 60vh;
    align-items: stretch;
    width: 100%;
  }
  #buildings-list {
    overflow-y: auto;
    max-height: calc(100vh - 320px);
    padding-right: 6px;
  }

  /* Right column: Uber building container */
  .col-right {
    display: flex;
    flex-direction: column;
    gap: 16px;
    min-height:220px;
    align-items: stretch;
    width: 100%;
  }
  /* Make sure the Uber card visually matches building cards */
  .uber-building-card {
    display: grid;
    grid-template-columns: auto 1fr auto;
    gap: 12px;
    align-items: center;
    background: linear-gradient(180deg,#1f1b1a,#2b2624);
    border-radius:8px;
    padding:12px;
    border:2px solid rgba(0,0,0,0.6);
    box-shadow: inset 0 6px 12px rgba(0,0,0,0.45);
    min-height:220px;
  }
  .uber-pixel { width:80px;height:80px;border-radius:8px;background:linear-gradient(180deg,#3a2f2b,#1f1715);border:2px solid rgba(0,0,0,0.6); }
  .uber-actions { display:flex;flex-direction:column;gap:8px;align-items:flex-end; }

  /* Notifications / toasts styling adjustments to keep them compact */
  .notice-board { min-height: auto; max-height: 40vh; overflow-y: auto; }
  .toasts .toast { display:flex;align-items:center;gap:8px;justify-content:space-between; }

  /* Ensure click-area remains usable and not stretched */
  .click-area { width:100%; }

  /* Responsive: stack columns on small screens */
  @media (max-width: 980px) {
    .game-columns { 
      grid-template-columns: 1fr; 
      width: 100%;         /* –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö –∏—Å–ø–æ–ª—å–∑—É–µ–º —à–∏—Ä–∏–Ω—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ */
      padding: 16px;       /* —á—É—Ç—å –º–µ–Ω—å—à–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –æ—Ç—Å—Ç—É–ø */
    }
    #buildings-list { max-height: 40vh; }
  }




</style>


</head>
<body>

  <!-- AUTH SCREEN -->
  <div id="auth-screen" class="screen">
    <div class="auth-card">
      <h1>Medieval Pixel Idle</h1>
      <p class="subtitle">Welcome traveler. Log in or register to begin.</p>

      <div class="auth-tabs">
        <button class="tab-btn active" data-tab="login">Login</button>
        <button class="tab-btn" data-tab="register">Register</button>
        <button class="tab-btn" data-tab="local">Local save</button>
      </div>

      <div class="auth-panels">
        <div class="auth-panel" id="login-panel">
          <label class="label">
            <span>Email</span>
            <input id="login-username" type="email" maxlength="64" autocomplete="email" />
            <small class="field-hint" id="login-email-hint"></small>
            <small class="field-error" id="login-email-error"></small>
          </label>
          <label class="label">
            <span>Password</span>
            <input id="login-password" type="password" maxlength="64" autocomplete="current-password"/>
            <small class="field-hint" id="login-password-hint"></small>
            <small class="field-error" id="login-password-error"></small>
          </label>
          <button id="login-btn" class="btn primary">Enter</button>
        </div>

        <div class="auth-panel hidden" id="register-panel">
          <label class="label">
            <span>Email</span>
            <input id="register-email" type="email" maxlength="64" autocomplete="email" />
            <small class="field-hint" id="register-email-hint">Enter a valid email address</small>
            <small class="field-error" id="register-email-error"></small>
          </label>
          <label class="label">
            <span>Password</span>
            <input id="register-password" type="password" maxlength="64" autocomplete="new-password"/>
            <small class="field-hint" id="register-password-hint">Minimum 6 characters required</small>
            <small class="field-error" id="register-password-error"></small>
          </label>
          <button id="register-btn" class="btn primary">Create account</button>
        </div>

        <div class="auth-panel hidden" id="local-panel">
          <p style="margin-bottom: 16px; color: #aaa;">Load your local save from this browser</p>
          <button id="local-load-btn" class="btn primary">Load Local Save</button>
          <div style="margin-top: 20px; padding-top: 20px; border-top: 1px solid rgba(255,255,255,0.1);">
            <p style="margin-bottom: 12px; color: #aaa;">Export/Import save file</p>
            <button id="local-download-btn" class="btn secondary" style="margin-bottom: 8px; width: 100%;">Download Save</button>
            <label class="label" style="margin-top: 12px;">
              <span>Upload Save File</span>
              <input id="local-upload-input" type="file" accept=".json" style="margin-top: 8px;" />
            </label>
            <button id="local-upload-btn" class="btn secondary" style="margin-top: 8px; width: 100%;">Upload Save</button>
          </div>
        </div>
      </div>

      <div class="auth-footer">
        <small>Your progress is autosaved every second.</small>
      </div>
    </div>
  </div>

  <!-- DEBUG -->
  <div id="debug-modal" class="modal hidden">
    <div class="modal-card">
      <h2>Debug Panel</h2>

      <div id="debug-lock">
        <p>Enter password:</p>
        <input id="debug-pass" type="password" placeholder="Password"/>
        <button id="debug-unlock-btn" class="btn primary">Unlock</button>
      </div>

      <div id="debug-tools" class="hidden">
        <div class="debug-actions">
          <button class="btn secondary" data-debug="addPoints">Add 10000 points</button>
          <button class="btn secondary" data-debug="addAllBuildingLevels">Add 100 levels to all buildings</button>
          <button class="btn secondary" data-debug="addClickLevels">Add 100 levels to Click</button>
          <button class="btn secondary" data-debug="clickIncomeBoost">Click income x1000</button>
          <button class="btn secondary" data-debug="spawnSpider">Spawn spider</button>
          <button class="btn secondary" data-debug="spawnAngryBarmatun">Spawn Angry Barmatun</button>
          <button class="btn secondary" data-debug="spawnElfArcher">Spawn Elf Archer</button>
          <button class="btn secondary" data-debug="spawnKing">Spawn king</button>
          <button class="btn secondary" data-debug="addUberLevels">+10 levels to Citadel</button>
          <button class="btn secondary" data-debug="addMillionPoints">+1M points</button>
          <button class="btn secondary" data-debug="cycleSeason">Cycle season</button>
          <button class="btn secondary" data-debug="breakClick">Break click button</button>
          <button class="btn secondary" data-debug="goldenClick">Make click button golden</button>
          <button class="btn secondary" data-debug="goodLuck">Good luck (toggle: buildings can't break)</button>
          <button class="btn secondary" data-debug="resetUberBuffs">Reset uber-buffs</button>
          <button class="btn secondary" data-debug="addTreasury">+1000 treasury coins</button>
          <button class="btn danger" data-debug="resetAll">Reset all levels and points</button>
        </div>
      </div>

      <button id="debug-close" class="btn tiny">Close</button>
    </div>
  </div>

  <!-- GAME SCREEN -->
  <div id="game-screen" class="screen hidden game-layout">



    <!-- TITLE -->
    <div class="game-title">Medieval Pixel Idle</div>

    <!-- STATS -->
    <div class="stats-container">
      <button id="achievements-btn" class="btn secondary achievements-btn-left" title="Hall of Fame">Hall of Fame</button>
      
      <div class="stats-bar">
        <div class="stat">
          <span class="stat-label">Points</span>
          <span id="points" class="stat-value">0.0000</span>
        </div>
        <div class="stat">
          <span class="stat-label">Points/sec</span>
          <span id="pps" class="stat-value">0.0000</span>
        </div>
        <div class="stat">
          <span class="stat-label">Points/click</span>
          <span id="ppc" class="stat-value">0.1111</span>
        </div>

        <div class="userbox">
          <span id="username-display"></span>
          <div class="music-control-container">
            <button id="sound-toggle-btn" class="btn tiny" title="Music settings">üîä</button>
            <div id="music-menu" class="music-menu hidden">
              <div class="music-menu-header">Audio Settings</div>
              <div class="volume-control-group">
                <div class="volume-control-label">Music Volume</div>
                <input type="range" id="music-volume-slider" min="0" max="100" value="50" class="volume-slider">
                <div class="music-volume-value"><span id="music-volume-display">50</span>%</div>
              </div>
              <div class="volume-control-group" style="margin-top: 16px;">
                <div class="volume-control-label">Sound Effects Volume</div>
                <input type="range" id="sound-effects-volume-slider" min="0" max="100" value="50" class="volume-slider">
                <div class="music-volume-value"><span id="sound-effects-volume-display">50</span>%</div>
              </div>
            </div>
          </div>
          <button id="hints-toggle-btn" class="btn tiny" title="Toggle hints">üí°</button>
          <button id="stats-btn" class="btn tiny">Stats</button>
          <button id="logout-btn" class="btn tiny">Logout</button>
          <button id="debug-open" class="btn tiny secondary">debug</button>
        </div>
      </div>
      
      <div class="treasury-actions" id="treasury-actions"></div>
    </div>

    <!-- Treasury row -->
    <div class="treasury-row">
      <div class="treasury-bar">
        <div class="treasury-progress">
          <div id="treasury-progress-fill"></div>
          <div class="treasury-overlay">
            <span class="treasury-label">Treasury</span>
            <span id="treasury-value" class="treasury-amount">0 / 1000</span>
            <span id="treasury-regen" class="treasury-regen">+1 /s</span>
          </div>
        </div>
      </div>
    </div>

    <!-- MAIN CONTENT: three columns -->
    <main class="game-columns">

      <!-- LEFT COLUMN (1/3) ‚Äì cursor-related + notifications -->
      <section class="col-left">
        <div class="click-area">
          <div class="click-row">
            <button id="click-btn" class="btn click-btn">Click</button>

            <!-- middle column: status -->
            <div class="click-middle">
              <div id="click-status" class="status-badge">Ready</div>
            </div>

            <!-- bulk buttons: x1 and x10 -->
            <div class="bulk-buttons" id="bulk-buttons">
              <button class="btn tiny bulk" data-bulk="1">x1</button>
              <button class="btn tiny bulk" data-bulk="10">x10</button>
            </div>

            <!-- right column: Buy and Upgrade (Buy to the right of Click, Upgrade under Buy) -->
            <div class="quick-actions">
              <button id="click-buy" class="btn primary">Buy "Click" level</button>
              <button id="click-seg-upgrade" class="btn small mt-6 seg-upgrade-btn hidden">Upgrade</button>
            </div>
          </div>

          <div class="building-info">
            <div class="building-name">Click</div>
            <div class="building-meta"><strong>Level:</strong> <span id="click-level">0</span> / <span id="click-max">1000</span></div>
            <div class="building-meta"><strong>Income/click:</strong> <span id="click-income">0.1111</span></div>
            <div class="building-meta"><strong>Next Cost:</strong> <span id="click-cost">7.7720</span></div>
          </div>
        </div>

        <div class="notice-board">
          <h3>Notifications</h3>
          <div id="toasts" class="toasts"></div>
        </div>

        <div class="endgame">
          <button id="endgame-btn" class="btn hidden">End Game (Reset)</button>
          <button id="uber-mode-btn" class="btn hidden">Enter Uber Mode</button>
        </div>
      </section>

      <!-- CENTER COLUMN (2/3) ‚Äì buildings list (scrollable) -->
      <section class="col-center">
        <!-- Sort button between treasury and buildings -->
        <div class="sort-button-container">
          <button id="sort-buildings-btn" class="btn small" title="Sort buildings">Sort: Default</button>
        </div>
        <div id="buildings-list" class="buildings-list"></div>
      </section>

      <!-- RIGHT COLUMN (3/3) ‚Äì Uber building (visible, placed on the right third) -->
      <!-- RIGHT COLUMN (3/3) ‚Äì Uber building (visually matches building cards, height equals Click block) -->
<section class="col-right">
  <div class="building-card" id="uber-card" aria-label="Uber Turbo Building">
    <div class="building-pixel uber-pixel" id="uber-pixel"></div>

    <div class="building-info">
      <div class="building-name">Citadel</div>
      <div class="building-meta"><strong>Level:</strong> <span id="uber-level">0</span> / <span id="uber-max">19</span></div>
      <div class="building-meta"><strong>Income/sec:</strong> <span id="uber-income">0.0000</span></div>
      <div class="building-meta"><strong>Next Cost:</strong> <span id="uber-cost">0.0000</span></div>
    </div>

    <div class="building-actions" id="uber-actions">
      <button id="uber-buy" class="btn primary" disabled>Buy levels</button>
    </div>
  </div>

  <!-- Achievements section -->
  <div class="achievements-container">
    <h3 class="achievements-title">Achievements</h3>
    <div id="achievements-list" class="achievements-list"></div>
  </div>
</section>

      </section>

    </main>

    <!-- SPIDER -->
    <div id="spider" class="spider hidden" title="Catch the spider!"></div>
    
    <!-- ANGRY BARMATUN -->
    <div id="angry-barmatun" class="spider hidden" title="Angry Barmatun - click to interact!"></div>
    
    <!-- ELF ARCHER -->
    <div id="elf-archer" class="elf-archer hidden" title="Elf Archer - click to scare away!"></div>

  </div>

<!-- Updates button (fixed top-left) -->
<button id="updates-btn" aria-haspopup="dialog" aria-controls="updates-modal" title="Updates">Updates</button>

<!-- Updates modal -->
<div id="updates-modal" role="dialog" aria-modal="true" aria-hidden="true">
  <div class="modal-card" role="document" aria-labelledby="updates-title">
    <div class="modal-header">
      <h3 id="updates-title">Game updates</h3>
      <button class="modal-close" id="updates-close" aria-label="Close updates">‚úï</button>
    </div>
    <div class="modal-body" id="updates-body">
      <!-- –°—é–¥–∞ JS –≤—Å—Ç–∞–≤–∏—Ç —Å–ø–∏—Å–æ–∫ –∞–ø–¥–µ–π—Ç–æ–≤ -->
    </div>
    <div class="modal-footer">
    </div>
  </div>
</div>

<!-- Confirmation modal -->
<div id="confirm-modal" role="dialog" aria-modal="true" aria-hidden="true">
  <div class="modal-card" role="document" aria-labelledby="confirm-title">
    <div class="modal-header">
      <h3 id="confirm-title">Confirmation</h3>
    </div>
    <div class="modal-body" id="confirm-body">
      <p id="confirm-message"></p>
    </div>
    <div class="modal-footer">
      <button id="confirm-yes" class="btn primary">Yes</button>
      <button id="confirm-no" class="btn">No</button>
    </div>
  </div>
</div>

<!-- Statistics modal -->
<div id="stats-modal" role="dialog" aria-modal="true" aria-hidden="true" class="stats-modal-fullscreen">
  <div class="stats-modal-content">
    <div class="stats-modal-header">
      <h2 class="stats-modal-title">üèÜ Hall of Fame</h2>
      <button class="modal-close" id="stats-close" aria-label="Close achievements">‚úï</button>
    </div>
    
    <div class="stats-modal-tabs">
      <button class="stats-tab active" data-tab="overall">Overall</button>
      <button class="stats-tab" data-tab="points">Points</button>
      <button class="stats-tab" data-tab="buildings">Buildings</button>
      <button class="stats-tab" data-tab="clicks">Clicks</button>
      <button class="stats-tab" data-tab="achievements">Achievements</button>
      <button class="stats-tab" data-tab="spidersSquished">Spiders Squished</button>
      <button class="stats-tab" data-tab="spidersWithBuff">Spiders (Buff)</button>
      <button class="stats-tab" data-tab="spidersWithDebuff">Spiders (Debuff)</button>
      <button class="stats-tab" data-tab="barmatunsCaught">Barmatuns</button>
      <button class="stats-tab" data-tab="barmatunsWithBuff">Barmatuns (Buff)</button>
      <button class="stats-tab" data-tab="barmatunsWithDebuff">Barmatuns (Debuff)</button>
      <button class="stats-tab" data-tab="destructions">Destructions</button>
      <button class="stats-tab" data-tab="kingBlessings">King Blessings</button>
      <button class="stats-tab" data-tab="statistics">Statistics</button>
    </div>
    
    <div class="leaderboard-time-filter">
      <button class="time-filter-btn active" data-filter="all">All Time</button>
      <button class="time-filter-btn" data-filter="week">This Week</button>
      <button class="time-filter-btn" data-filter="month">This Month</button>
    </div>
    
    <div class="stats-modal-body">
      <div class="stats-tab-content active" id="stats-tab-overall">
        <div class="leaderboard-container">
          <div class="leaderboard-player-position" id="leaderboard-player-position-overall"></div>
          <div class="leaderboard-table-container">
            <table class="leaderboard-table">
              <thead>
                <tr>
                  <th>Rank</th>
                  <th>Player</th>
                  <th>Score</th>
                </tr>
              </thead>
              <tbody id="leaderboard-table-body-overall"></tbody>
            </table>
          </div>
        </div>
      </div>
      <div class="stats-tab-content" id="stats-tab-points">
        <div class="leaderboard-container">
          <div class="leaderboard-player-position" id="leaderboard-player-position-points"></div>
          <div class="leaderboard-table-container">
            <table class="leaderboard-table">
              <thead>
                <tr>
                  <th>Rank</th>
                  <th>Player</th>
                  <th>Points</th>
                </tr>
              </thead>
              <tbody id="leaderboard-table-body-points"></tbody>
            </table>
          </div>
        </div>
      </div>
      <div class="stats-tab-content" id="stats-tab-buildings">
        <div class="leaderboard-container">
          <div class="leaderboard-player-position" id="leaderboard-player-position-buildings"></div>
          <div class="leaderboard-table-container">
            <table class="leaderboard-table">
              <thead>
                <tr>
                  <th>Rank</th>
                  <th>Player</th>
                  <th>Total Levels</th>
                </tr>
              </thead>
              <tbody id="leaderboard-table-body-buildings"></tbody>
            </table>
          </div>
        </div>
      </div>
      <div class="stats-tab-content" id="stats-tab-clicks">
        <div class="leaderboard-container">
          <div class="leaderboard-player-position" id="leaderboard-player-position-clicks"></div>
          <div class="leaderboard-table-container">
            <table class="leaderboard-table">
              <thead>
                <tr>
                  <th>Rank</th>
                  <th>Player</th>
                  <th>Clicks</th>
                </tr>
              </thead>
              <tbody id="leaderboard-table-body-clicks"></tbody>
            </table>
          </div>
        </div>
      </div>
      <div class="stats-tab-content" id="stats-tab-achievements">
        <div class="leaderboard-container">
          <div class="leaderboard-player-position" id="leaderboard-player-position-achievements"></div>
          <div class="leaderboard-table-container">
            <table class="leaderboard-table">
              <thead>
                <tr>
                  <th>Rank</th>
                  <th>Player</th>
                  <th>Achievements</th>
                </tr>
              </thead>
              <tbody id="leaderboard-table-body-achievements"></tbody>
            </table>
          </div>
        </div>
      </div>
      <div class="stats-tab-content" id="stats-tab-spidersSquished">
        <div class="leaderboard-container">
          <div class="leaderboard-player-position" id="leaderboard-player-position-spidersSquished"></div>
          <div class="leaderboard-table-container">
            <table class="leaderboard-table">
              <thead>
                <tr>
                  <th>Rank</th>
                  <th>Player</th>
                  <th>Count</th>
                </tr>
              </thead>
              <tbody id="leaderboard-table-body-spidersSquished"></tbody>
            </table>
          </div>
        </div>
      </div>
      <div class="stats-tab-content" id="stats-tab-spidersWithBuff">
        <div class="leaderboard-container">
          <div class="leaderboard-player-position" id="leaderboard-player-position-spidersWithBuff"></div>
          <div class="leaderboard-table-container">
            <table class="leaderboard-table">
              <thead>
                <tr>
                  <th>Rank</th>
                  <th>Player</th>
                  <th>Count</th>
                </tr>
              </thead>
              <tbody id="leaderboard-table-body-spidersWithBuff"></tbody>
            </table>
          </div>
        </div>
      </div>
      <div class="stats-tab-content" id="stats-tab-spidersWithDebuff">
        <div class="leaderboard-container">
          <div class="leaderboard-player-position" id="leaderboard-player-position-spidersWithDebuff"></div>
          <div class="leaderboard-table-container">
            <table class="leaderboard-table">
              <thead>
                <tr>
                  <th>Rank</th>
                  <th>Player</th>
                  <th>Count</th>
                </tr>
              </thead>
              <tbody id="leaderboard-table-body-spidersWithDebuff"></tbody>
            </table>
          </div>
        </div>
      </div>
      <div class="stats-tab-content" id="stats-tab-barmatunsCaught">
        <div class="leaderboard-container">
          <div class="leaderboard-player-position" id="leaderboard-player-position-barmatunsCaught"></div>
          <div class="leaderboard-table-container">
            <table class="leaderboard-table">
              <thead>
                <tr>
                  <th>Rank</th>
                  <th>Player</th>
                  <th>Count</th>
                </tr>
              </thead>
              <tbody id="leaderboard-table-body-barmatunsCaught"></tbody>
            </table>
          </div>
        </div>
      </div>
      <div class="stats-tab-content" id="stats-tab-barmatunsWithBuff">
        <div class="leaderboard-container">
          <div class="leaderboard-player-position" id="leaderboard-player-position-barmatunsWithBuff"></div>
          <div class="leaderboard-table-container">
            <table class="leaderboard-table">
              <thead>
                <tr>
                  <th>Rank</th>
                  <th>Player</th>
                  <th>Count</th>
                </tr>
              </thead>
              <tbody id="leaderboard-table-body-barmatunsWithBuff"></tbody>
            </table>
          </div>
        </div>
      </div>
      <div class="stats-tab-content" id="stats-tab-barmatunsWithDebuff">
        <div class="leaderboard-container">
          <div class="leaderboard-player-position" id="leaderboard-player-position-barmatunsWithDebuff"></div>
          <div class="leaderboard-table-container">
            <table class="leaderboard-table">
              <thead>
                <tr>
                  <th>Rank</th>
                  <th>Player</th>
                  <th>Count</th>
                </tr>
              </thead>
              <tbody id="leaderboard-table-body-barmatunsWithDebuff"></tbody>
            </table>
          </div>
        </div>
      </div>
      <div class="stats-tab-content" id="stats-tab-destructions">
        <div class="leaderboard-container">
          <div class="leaderboard-player-position" id="leaderboard-player-position-destructions"></div>
          <div class="leaderboard-table-container">
            <table class="leaderboard-table">
              <thead>
                <tr>
                  <th>Rank</th>
                  <th>Player</th>
                  <th>Count</th>
                </tr>
              </thead>
              <tbody id="leaderboard-table-body-destructions"></tbody>
            </table>
          </div>
        </div>
      </div>
      <div class="stats-tab-content" id="stats-tab-kingBlessings">
        <div class="leaderboard-container">
          <div class="leaderboard-player-position" id="leaderboard-player-position-kingBlessings"></div>
          <div class="leaderboard-table-container">
            <table class="leaderboard-table">
              <thead>
                <tr>
                  <th>Rank</th>
                  <th>Player</th>
                  <th>Count</th>
                </tr>
              </thead>
              <tbody id="leaderboard-table-body-kingBlessings"></tbody>
            </table>
          </div>
        </div>
      </div>
      <div class="stats-tab-content" id="stats-tab-statistics">
        <div id="stats-body"></div>
      </div>
    </div>
  </div>
</div>

<!-- King element (appears/disappears via script) -->
<div id="king" class="king" title="King"></div>

<!-- Casino modal -->
<div id="casino-modal" role="dialog" aria-modal="true" aria-hidden="true">
  <div class="modal-card" role="document" aria-labelledby="casino-title">
    <div id="casino-result-overlay" class="casino-result-overlay hidden">
      <div class="casino-result-content">
        <div id="casino-result-dice" class="casino-result-dice"></div>
        <div id="casino-result-text" class="casino-result-text"></div>
        <div id="casino-result-amount" class="casino-result-amount"></div>
      </div>
    </div>
    <div class="modal-header">
      <h3 id="casino-title">üé≤ CASINO LOSEWIN-LINE</h3>
      <button class="modal-close" id="casino-close" aria-label="Close casino">‚úï</button>
    </div>
    <div class="modal-body" id="casino-body">
      <div class="casino-content">
        <div class="casino-section">
          <h4>Select Bet Percentage:</h4>
          <div class="casino-buttons">
            <button class="btn casino-bet-btn" data-percent="10">10%</button>
            <button class="btn casino-bet-btn" data-percent="20">20%</button>
            <button class="btn casino-bet-btn" data-percent="30">30%</button>
            <button class="btn casino-bet-btn" data-percent="40">40%</button>
            <button class="btn casino-bet-btn" data-percent="50">50%</button>
            <button class="btn casino-bet-btn" data-percent="100">100%</button>
          </div>
          <div class="casino-stake-info">
            <p>Selected: <span id="casino-stake-percent">-</span></p>
            <p>Stake: <span id="casino-stake-amount">-</span> points</p>
          </div>
        </div>
        <div class="casino-section">
          <h4>Choose Dice Face (1-6):</h4>
          <div class="casino-dice">
            <button class="btn casino-dice-btn" data-face="1">1</button>
            <button class="btn casino-dice-btn" data-face="2">2</button>
            <button class="btn casino-dice-btn" data-face="3">3</button>
            <button class="btn casino-dice-btn" data-face="4">4</button>
            <button class="btn casino-dice-btn" data-face="5">5</button>
            <button class="btn casino-dice-btn" data-face="6">6</button>
          </div>
          <div class="casino-face-info">
            <p>Selected: <span id="casino-face-selected">-</span></p>
          </div>
        </div>
        <div class="casino-info">
          <p><strong>Win:</strong> stake x3 is returned</p>
          <p><strong>Lose:</strong> stake x1.2 is lost (can result in negative points)</p>
          <p class="casino-warning">‚ö†Ô∏è Betting 100% can result in negative points if you lose!</p>
        </div>
      </div>
    </div>
    <div class="modal-footer">
      <button id="casino-roll-btn" class="btn primary" disabled>Roll Dice</button>
      <button id="casino-cancel-btn" class="btn">Cancel</button>
    </div>
  </div>
</div>

<!-- King mini-game modal -->
<div id="king-modal" aria-hidden="true">
  <div class="king-game" role="dialog" aria-modal="true" aria-label="King mini game">
    <div class="kg-top">
      <div>King: catch the crowns!</div>
      <div class="kg-timer" id="king-game-timer">8.0s</div>
    </div>
    <div class="kg-arena" id="king-arena" tabindex="0" aria-label="Arena for crowns">
      <!-- crowns will be added here dynamically -->
    </div>
    <div class="kg-footer">
      <div id="king-game-status" class="muted">Click 12 crowns in 8 seconds. Clicking the background is an instant miss.</div>
      <div>
        <button id="king-game-close" class="btn small">Cancel</button>
      </div>
    </div>
  </div>
</div>


  <canvas id="sprite-canvas" class="hidden"></canvas>
  <!-- Background music -->
  <!-- –ò—Å–ø–æ–ª—å–∑—É–µ–º –ª–æ–∫–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã –º—É–∑—ã–∫–∏ –∏–∑ –ø–∞–ø–∫–∏ music -->
  <audio id="background-music" preload="auto">
    <!-- –§–∞–π–ª—ã –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ JavaScript -->
  </audio>
  <script src="script.js"></script>
</body>
</html>
